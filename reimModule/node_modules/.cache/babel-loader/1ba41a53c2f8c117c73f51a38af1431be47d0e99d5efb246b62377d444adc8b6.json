{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{Button,Box,OutlinedInput,Select,MenuItem,TextField,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper}from\"@material-ui/core\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReimbursementItems(_ref){let{reimItems,setItems,isEditing,reimbursmentId,status,reimbursementDate,totalAmount,setTotalAmount,validationErrors}=_ref;const[nextItemId,setNextItemId]=useState(10);const reimbursementTypes=[\"Travel\",\"Meals\",\"Supplies\",\"Accommodation\"];const reimbursementTypeDefaults={Travel:500,Meals:200,Supplies:300,Accommodation:1000};// const handleInputChange = (field, index, value) => {\n//   const updatedItems = [...reimItems];\n//   updatedItems[index][field] = value;\n//   setItems(updatedItems);\n// };\nconst handleAddItem=()=>{const lastItemValue=reimItems.length>0?reimItems[reimItems.length-1].item:0;const newItem={id:nextItemId,item:Number(lastItemValue)+10||10,reimbursementType:\"\",reimbursementDate:\"\",amountToBeReimbursed:\"\",amountEligibleToClaim:\"\"};setItems(prevItems=>[...prevItems,newItem]);setNextItemId(prevId=>prevId+10);};const handleReimbursementDateChange=(e,id)=>{const updatedItems=reimItems.map(item=>item.id===id?{...item,reimbursementDate:e.target.value}:item);setItems(updatedItems);};const handleReimbursementTypeChange=(value,id)=>{const updatedItems=reimItems.map(item=>item.id===id?{...item,reimbursementType:value}:item);setItems(updatedItems);};const handleAmountToBeReimbursedChange=(e,id)=>{const value=parseFloat(e.target.value)||0;const updatedItems=reimItems.map(item=>item.id===id?{...item,amountToBeReimbursed:value>item.amountEligibleToClaim?item.amountEligibleToClaim// Set to eligible amount if input exceeds it\n:value}:item);setItems(updatedItems);calculateTotalAmount(updatedItems);};const calculateTotalAmount=items=>{const total=items.reduce((sum,item)=>sum+(Number(item.amountToBeReimbursed)||0),0);setTotalAmount(total);};return/*#__PURE__*/_jsxs(Box,{py:5,children:[/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Item\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Reimbursement Type\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Reimbursement Date\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Amount To Be Reimbursed\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Amount Eligible To Claim\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:reimItems.map(item=>/*#__PURE__*/_jsxs(TableRow,{className:\"custom-table-row\",children:[/*#__PURE__*/_jsx(TableCell,{className:\"custom-table-cell\",style:{width:'auto',whiteSpace:'nowrap'},children:item.item}),/*#__PURE__*/_jsxs(TableCell,{className:\"custom-table-cell\",style:{width:\"auto\",whiteSpace:\"nowrap\"},children:[/*#__PURE__*/_jsxs(Select,{value:item.reimbursementType||\"\",onChange:e=>handleReimbursementTypeChange(e.target.value,item.id),displayEmpty:true,style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",disabled:true,children:\"Select Type\"}),reimbursementTypes.map(type=>/*#__PURE__*/_jsx(MenuItem,{value:type,children:type},type))]}),\") : ( item.reimbursementType || \\\"N/A\\\" )}\"]}),/*#__PURE__*/_jsx(TableCell,{className:\"custom-table-cell\",style:{width:\"auto\",whiteSpace:\"nowrap\"},children:isEditing?/*#__PURE__*/_jsx(TextField,{type:\"date\",value:item.reimbursementDate||\"\",onChange:e=>handleReimbursementDateChange(e,item.id),InputLabelProps:{shrink:true},style:{width:\"100%\"},className:\"editable-cell\"}):item.reimbursementDate||\"N/A\"}),/*#__PURE__*/_jsx(TableCell,{className:\"custom-table-cell\",style:{width:'auto',whiteSpace:'nowrap'},children:/*#__PURE__*/_jsx(OutlinedInput,{value:item.amountToBeReimbursed||\"\",onChange:e=>handleAmountToBeReimbursedChange(e,item.id),placeholder:\"Amount to be reimbursed\",className:\"editable-cell\",error:!!validationErrors[`item-${item.id}-amountToBeReimbursed`],\"aria-describedby\":`item-${item.id}-amountToBeReimbursed-error`})}),/*#__PURE__*/_jsx(TableCell,{children:item.amountEligibleToClaim})]},item.id))})]})}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",onClick:handleAddItem,style:{marginTop:\"16px\"},children:\"Add Item\"})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","Button","Box","OutlinedInput","Select","MenuItem","TextField","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","jsx","_jsx","jsxs","_jsxs","ReimbursementItems","_ref","reimItems","setItems","isEditing","reimbursmentId","status","reimbursementDate","totalAmount","setTotalAmount","validationErrors","nextItemId","setNextItemId","reimbursementTypes","reimbursementTypeDefaults","Travel","Meals","Supplies","Accommodation","handleAddItem","lastItemValue","length","item","newItem","id","Number","reimbursementType","amountToBeReimbursed","amountEligibleToClaim","prevItems","prevId","handleReimbursementDateChange","e","updatedItems","map","target","value","handleReimbursementTypeChange","handleAmountToBeReimbursedChange","parseFloat","calculateTotalAmount","items","total","reduce","sum","py","children","component","className","style","width","whiteSpace","onChange","displayEmpty","disabled","type","InputLabelProps","shrink","placeholder","error","variant","color","onClick","marginTop"],"sources":["/home/user/projects/ReactReimbursement/reimModule/src/pages/ReimbursementItems.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport {\n  Button, Box, OutlinedInput, Select, MenuItem, TextField, Table, TableBody,\n  TableCell, TableContainer, TableHead, TableRow, Paper\n} from \"@material-ui/core\";\n\nexport default function ReimbursementItems({ reimItems, setItems, isEditing, reimbursmentId, status, reimbursementDate, totalAmount, setTotalAmount, validationErrors }) {\n  const [nextItemId, setNextItemId] = useState(10);\n\n  const reimbursementTypes = [\"Travel\", \"Meals\", \"Supplies\", \"Accommodation\"];\n  const reimbursementTypeDefaults = {\n    Travel: 500,\n    Meals: 200,\n    Supplies: 300,\n    Accommodation: 1000,\n  };\n\n  // const handleInputChange = (field, index, value) => {\n  //   const updatedItems = [...reimItems];\n  //   updatedItems[index][field] = value;\n  //   setItems(updatedItems);\n  // };\n\n  const handleAddItem = () => {\n    const lastItemValue = reimItems.length > 0 ? reimItems[reimItems.length - 1].item : 0;\n    const newItem = {\n      id: nextItemId,\n      item: Number(lastItemValue) + 10 || 10,\n      reimbursementType: \"\",\n      reimbursementDate: \"\",\n      amountToBeReimbursed: \"\",\n      amountEligibleToClaim: \"\"\n    };\n    setItems(prevItems => [...prevItems, newItem]);\n    setNextItemId(prevId => prevId + 10);\n\n  };\n\n \n  const handleReimbursementDateChange = (e, id) => {\n    const updatedItems = reimItems.map((item) =>\n      item.id === id ? { ...item, reimbursementDate: e.target.value } : item\n    );\n    setItems(updatedItems);\n  };\n  const handleReimbursementTypeChange = (value, id) => {\n    const updatedItems = reimItems.map((item) =>\n      item.id === id ? { ...item, reimbursementType: value } : item\n    );\n    setItems(updatedItems);\n  };\n    \n\n  const handleAmountToBeReimbursedChange = (e, id) => {\n    const value = parseFloat(e.target.value) || 0;\n    const updatedItems = reimItems.map(item =>\n      item.id === id\n        ? {\n          ...item,\n          amountToBeReimbursed: value > item.amountEligibleToClaim\n            ? item.amountEligibleToClaim  // Set to eligible amount if input exceeds it\n            : value\n        }\n        : item\n    );\n\n    setItems(updatedItems);\n    calculateTotalAmount(updatedItems);\n  };\n\n  const calculateTotalAmount = (items) => {\n    const total = items.reduce((sum, item) => sum + (Number(item.amountToBeReimbursed) || 0), 0);\n    setTotalAmount(total);\n  };\n\n\n  return (\n\n    <Box py={5}>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Item</TableCell>\n              <TableCell>Reimbursement Type</TableCell>\n              <TableCell>Reimbursement Date</TableCell>\n              <TableCell>Amount To Be Reimbursed</TableCell>\n              <TableCell>Amount Eligible To Claim</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {reimItems.map((item) => (\n          <TableRow key={item.id} className=\"custom-table-row\">\n          <TableCell className=\"custom-table-cell\" style={{ width: 'auto', whiteSpace: 'nowrap' }}>\n            {item.item}\n          </TableCell>\n          <TableCell\n            className=\"custom-table-cell\"\n            style={{ width: \"auto\", whiteSpace: \"nowrap\" }}\n          >\n              <Select\n                value={item.reimbursementType || \"\"}\n                onChange={(e) => handleReimbursementTypeChange(e.target.value, item.id)}\n                displayEmpty\n                style={{ width: \"100%\" }}\n              >\n                <MenuItem value=\"\" disabled>\n                  Select Type\n                </MenuItem>\n                {reimbursementTypes.map((type) => (\n                  <MenuItem key={type} value={type}>\n                    {type}\n                  </MenuItem>\n                ))}\n              </Select>\n            ) : (\n              item.reimbursementType || \"N/A\"\n            )}\n          </TableCell>\n          <TableCell\n            className=\"custom-table-cell\"\n            style={{ width: \"auto\", whiteSpace: \"nowrap\" }}\n          >\n            {isEditing ? (\n              <TextField\n                type=\"date\"\n                value={item.reimbursementDate || \"\"}\n                onChange={(e) => handleReimbursementDateChange(e, item.id)}\n                InputLabelProps={{ shrink: true }}\n                style={{ width: \"100%\" }}\n                className=\"editable-cell\"\n              />\n            ) : (\n              item.reimbursementDate || \"N/A\"\n            )}\n          </TableCell>\n          <TableCell className=\"custom-table-cell\" style={{ width: 'auto', whiteSpace: 'nowrap' }}>\n            <OutlinedInput\n              value={item.amountToBeReimbursed || \"\"}\n              onChange={(e) => handleAmountToBeReimbursedChange(e, item.id)}\n              placeholder=\"Amount to be reimbursed\"\n              className=\"editable-cell\"\n              error={!!validationErrors[`item-${item.id}-amountToBeReimbursed`]}\n              aria-describedby={`item-${item.id}-amountToBeReimbursed-error`}\n            />\n          </TableCell>\n          <TableCell>{item.amountEligibleToClaim}</TableCell>\n        </TableRow>\n        \n\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <Button variant=\"outlined\" color=\"primary\" onClick={handleAddItem} style={{ marginTop: \"16px\" }}>\n        Add Item\n      </Button>\n    </Box>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}