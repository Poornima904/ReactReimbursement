{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Container,Box,Toolbar,Button,TextField}from\"@material-ui/core\";import{DataGrid}from\"@material-ui/data-grid\";import{getTableData,getTableCount}from\"api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const columns=[{field:\"reimbursmentId\",headerName:\"Reimbursement ID\",width:250},{field:\"reimbursementDate\",headerName:\"Reimbursement Date\",flex:1},{field:\"totalAmount\",headerName:\"Total Amount\",flex:1}];const PAGE_SIZE=15;export default function MasterPage(_ref){let{onRowClick,onCreateClick}=_ref;const[items,setItems]=useState([]);const[loading,setLoading]=useState(false);const[rowCount,setRowCount]=useState(0);const[filterValues,setFilterValues]=useState({reimbursmentId:\"\",reimbursementDate:\"\",totalAmount:\"\"});const loadData=async function(isFirstLoad){let skip=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;try{setLoading(true);setItems([]);if(isFirstLoad){const count=await getTableCount();setRowCount(count);}const _items=await getTableData({$top:PAGE_SIZE,$skip:skip,...filterValues});const itemsWithIds=_items.map((item,index)=>({...item,id:index+skip}));setItems(itemsWithIds);}finally{setLoading(false);}};useEffect(()=>{loadData(true);},[]);return/*#__PURE__*/_jsxs(Container,{disableGutters:true,children:[/*#__PURE__*/_jsxs(Box,{mb:2,children:[/*#__PURE__*/_jsx(Toolbar,{}),/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(TextField,{label:\"Reimbursement ID\",variant:\"outlined\",name:\"reimbursmentId\",value:filterValues.reimbursmentId,onChange:e=>setFilterValues({...filterValues,reimbursmentId:e.target.value}),style:{marginRight:\"8px\"}}),/*#__PURE__*/_jsx(TextField,{label:\"Reimbursement Date\",variant:\"outlined\",name:\"reimbursementDate\",type:\"date\",value:filterValues.reimbursementDate,onChange:e=>setFilterValues({...filterValues,reimbursementDate:e.target.value}),InputLabelProps:{shrink:true},style:{marginRight:\"8px\"}}),/*#__PURE__*/_jsx(TextField,{label:\"Total Amount\",variant:\"outlined\",name:\"totalAmount\",value:filterValues.totalAmount,onChange:e=>setFilterValues({...filterValues,totalAmount:e.target.value}),style:{marginRight:\"8px\"}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>loadData(true),style:{marginRight:\"8px\"},children:\"Apply Filters\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"secondary\",style:{right:\"-22%\",position:\"relative\"},onClick:()=>loadData(true),children:\"Go\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:onCreateClick,style:{marginLeft:\"auto\"},children:\"Create\"})]})]}),/*#__PURE__*/_jsx(Box,{height:\"80vh\",py:5,children:/*#__PURE__*/_jsx(DataGrid,{loading:loading,rows:items,columns:columns,pageSize:PAGE_SIZE,paginationMode:\"server\",rowCount:rowCount,onPageChange:params=>loadData(false,params.page*PAGE_SIZE),onRowClick:params=>onRowClick(params.row.reimbursmentId)})})]});}","map":{"version":3,"names":["React","useEffect","useState","Container","Box","Toolbar","Button","TextField","DataGrid","getTableData","getTableCount","jsx","_jsx","jsxs","_jsxs","columns","field","headerName","width","flex","PAGE_SIZE","MasterPage","_ref","onRowClick","onCreateClick","items","setItems","loading","setLoading","rowCount","setRowCount","filterValues","setFilterValues","reimbursmentId","reimbursementDate","totalAmount","loadData","isFirstLoad","skip","arguments","length","undefined","count","_items","$top","$skip","itemsWithIds","map","item","index","id","disableGutters","children","mb","label","variant","name","value","onChange","e","target","style","marginRight","type","InputLabelProps","shrink","color","onClick","right","position","marginLeft","height","py","rows","pageSize","paginationMode","onPageChange","params","page","row"],"sources":["/home/user/projects/ReactReimbursement/reimModule/src/pages/MasterPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Container, Box, Toolbar, Button, TextField } from \"@material-ui/core\";\nimport { DataGrid } from \"@material-ui/data-grid\";\nimport { getTableData, getTableCount } from \"api\";\n\nconst columns = [\n  { field: \"reimbursmentId\", headerName: \"Reimbursement ID\", width: 250 },\n  { field: \"reimbursementDate\", headerName: \"Reimbursement Date\", flex: 1 },\n  { field: \"totalAmount\", headerName: \"Total Amount\", flex: 1 },\n];\n\nconst PAGE_SIZE = 15;\n\nexport default function MasterPage({ onRowClick, onCreateClick }) {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [rowCount, setRowCount] = useState(0);\n  const [filterValues, setFilterValues] = useState({\n    reimbursmentId: \"\",\n    reimbursementDate: \"\",\n    totalAmount: \"\"\n  });\n\n  const loadData = async (isFirstLoad, skip = 0) => {\n    try {\n      setLoading(true);\n      setItems([]);\n      if (isFirstLoad) {\n        const count = await getTableCount();\n        setRowCount(count);\n      }\n\n      const _items = await getTableData({\n        $top: PAGE_SIZE,\n        $skip: skip,\n        ...filterValues\n      });\n      const itemsWithIds = _items.map((item, index) => ({\n        ...item,\n        id: index + skip\n      }));\n      setItems(itemsWithIds);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadData(true);\n  }, []);\n\n  return (\n    <Container disableGutters>\n      <Box mb={2}>\n        <Toolbar></Toolbar>\n        <Toolbar>\n          <TextField\n            label=\"Reimbursement ID\"\n            variant=\"outlined\"\n            name=\"reimbursmentId\"\n            value={filterValues.reimbursmentId}\n            onChange={(e) => setFilterValues({ ...filterValues, reimbursmentId: e.target.value })}\n            style={{ marginRight: \"8px\" }}\n          />\n          <TextField\n            label=\"Reimbursement Date\"\n            variant=\"outlined\"\n            name=\"reimbursementDate\"\n            type=\"date\"\n            value={filterValues.reimbursementDate}\n            onChange={(e) => setFilterValues({ ...filterValues, reimbursementDate: e.target.value })}\n            InputLabelProps={{ shrink: true }}\n            style={{ marginRight: \"8px\" }}\n          />\n          <TextField\n            label=\"Total Amount\"\n            variant=\"outlined\"\n            name=\"totalAmount\"\n            value={filterValues.totalAmount}\n            onChange={(e) => setFilterValues({ ...filterValues, totalAmount: e.target.value })}\n            style={{ marginRight: \"8px\" }}\n          />\n          <Button variant=\"contained\" color=\"primary\" onClick={() => loadData(true)} style={{ marginRight: \"8px\" }}>\n            Apply Filters\n          </Button>\n          <Button variant=\"outlined\" color=\"secondary\" style={{ right: \"-22%\", position: \"relative\" }} onClick={() => loadData(true)}>\n            Go\n          </Button>\n          <Button variant=\"contained\" color=\"primary\" onClick={onCreateClick} style={{ marginLeft: \"auto\" }}>\n            Create\n          </Button>\n        </Toolbar>\n      </Box>\n\n      <Box height=\"80vh\" py={5}>\n        <DataGrid\n          loading={loading}\n          rows={items}\n          columns={columns}\n          pageSize={PAGE_SIZE}\n          paginationMode=\"server\"\n          rowCount={rowCount}\n          onPageChange={(params) => loadData(false, params.page * PAGE_SIZE)}\n          onRowClick={(params) => onRowClick(params.row.reimbursmentId)}\n        />\n\n      </Box>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}