{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Button,Box,OutlinedInput,Dialog,DialogActions,DialogContent,DialogTitle,Typography,Divider,Avatar}from\"@material-ui/core\";import{getComments}from\"api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Comments=_ref=>{let{comment,setComment,reimbursmentId}=_ref;const[open,setOpen]=useState(false);const[history,setHistory]=useState([]);useEffect(()=>{const fetchComments=async()=>{try{const comments=await getComments(reimbursmentId);console.log(\"comments\",comments);const formattedComments=comments.map((item,index)=>({id:index+1,text:item.textArea,// accessing text from comments.value[0].textArea\ndate:item.date||new Date().toISOString().slice(0,10),// Use item.date if available\nuser:item.user||\"Unknown User\",avatar:item.avatar||\"/path/to/default-avatar.jpg\"// Placeholder avatar\n}));setHistory(formattedComments);}catch(error){console.error(\"Failed to fetch comments:\",error);}};fetchComments();},[reimbursmentId]);const handleClickOpen=()=>{setOpen(true);};const handleClose=()=>{setOpen(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",style:{marginBottom:\"4px\",marginLeft:\"85%\"},onClick:handleClickOpen,children:\"Comment History\"}),/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:2,children:/*#__PURE__*/_jsx(Box,{flexGrow:1,mr:2,children:/*#__PURE__*/_jsx(OutlinedInput,{placeholder:\"Add a comment...\",multiline:true,rows:3,fullWidth:true,variant:\"outlined\",value:comment,onChange:e=>setComment(e.target.value)})})}),/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Comment History\"}),/*#__PURE__*/_jsx(DialogContent,{dividers:true,style:{maxHeight:\"300px\",overflowY:\"auto\"},children:history.length>0?history.map(entry=>/*#__PURE__*/_jsxs(Box,{display:\"flex\",mb:2,alignItems:\"flex-start\",children:[/*#__PURE__*/_jsx(Avatar,{alt:entry.user,src:entry.avatar,style:{marginRight:8}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:/*#__PURE__*/_jsx(\"strong\",{children:entry.user})}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:entry.date}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:entry.text}),/*#__PURE__*/_jsx(Divider,{style:{margin:\"10px 0\"}})]})]},entry.id)):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"No comment history available.\"})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"secondary\",children:\"Cancel\"})})]})]});};export default Comments;","map":{"version":3,"names":["React","useEffect","useState","Button","Box","OutlinedInput","Dialog","DialogActions","DialogContent","DialogTitle","Typography","Divider","Avatar","getComments","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Comments","_ref","comment","setComment","reimbursmentId","open","setOpen","history","setHistory","fetchComments","comments","console","log","formattedComments","map","item","index","id","text","textArea","date","Date","toISOString","slice","user","avatar","error","handleClickOpen","handleClose","children","variant","color","style","marginBottom","marginLeft","onClick","display","justifyContent","alignItems","mb","flexGrow","mr","placeholder","multiline","rows","fullWidth","value","onChange","e","target","onClose","maxWidth","dividers","maxHeight","overflowY","length","entry","alt","src","marginRight","margin"],"sources":["/home/user/projects/ReactReimbursement/reimModule/src/pages/Comments.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Button, Box, OutlinedInput, Dialog, DialogActions, DialogContent, DialogTitle, Typography, Divider, Avatar } from \"@material-ui/core\";\nimport { getComments } from \"api\";\n\nconst Comments = ({comment, setComment, reimbursmentId}) => {\n    const [open, setOpen] = useState(false);\n    const [history, setHistory] = useState([]);\n\n    useEffect(() => {\n        const fetchComments = async () => {\n            try {\n                const comments = await getComments(reimbursmentId);\n                console.log(\"comments\",comments);\n                const formattedComments = comments.map((item, index) => ({\n                    id: index + 1,\n                    text: item.textArea, // accessing text from comments.value[0].textArea\n                    date: item.date || new Date().toISOString().slice(0, 10), // Use item.date if available\n                    user: item.user || \"Unknown User\",\n                    avatar: item.avatar || \"/path/to/default-avatar.jpg\" // Placeholder avatar\n                }));\n                setHistory(formattedComments);\n            } catch (error) {\n                console.error(\"Failed to fetch comments:\", error);\n            }\n        };\n\n        fetchComments();\n    }, [reimbursmentId]);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    return (\n        <>\n            <Button\n                variant=\"contained\"\n                color=\"primary\"\n                style={{ marginBottom: \"4px\", marginLeft: \"85%\" }}\n                onClick={handleClickOpen}\n            >\n                Comment History\n            </Button>\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\n                <Box flexGrow={1} mr={2}>\n                    <OutlinedInput\n                        placeholder=\"Add a comment...\"\n                        multiline\n                        rows={3}\n                        fullWidth\n                        variant=\"outlined\"\n                        value={comment}\n                        onChange={(e) => setComment(e.target.value)}\n                    />\n                </Box>\n            </Box>\n\n            <Dialog open={open} onClose={handleClose} maxWidth=\"sm\" fullWidth>\n                <DialogTitle>Comment History</DialogTitle>\n\n                <DialogContent dividers style={{ maxHeight: \"300px\", overflowY: \"auto\" }}>\n                    {history.length > 0 ? (\n                        history.map((entry) => (\n                            <Box key={entry.id} display=\"flex\" mb={2} alignItems=\"flex-start\">\n                                <Avatar alt={entry.user} src={entry.avatar} style={{ marginRight: 8 }} />\n                                <Box>\n                                    <Typography variant=\"body1\"><strong>{entry.user}</strong></Typography>\n                                    <Typography variant=\"body2\" color=\"textSecondary\">{entry.date}</Typography>\n                                    <Typography variant=\"body2\">{entry.text}</Typography>\n                                    <Divider style={{ margin: \"10px 0\" }} />\n                                </Box>\n                            </Box>\n                        ))\n                    ) : (\n                        <Typography variant=\"body2\" color=\"textSecondary\">No comment history available.</Typography>\n                    )}\n                </DialogContent>\n\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"secondary\">\n                        Cancel\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n};\n\nexport default Comments;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}