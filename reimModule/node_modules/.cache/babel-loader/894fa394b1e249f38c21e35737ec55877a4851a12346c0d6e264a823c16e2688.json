{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Container,Box,Toolbar,Button,Typography}from\"@material-ui/core\";import{DataGrid}from\"@material-ui/data-grid\";import{getTableData,getTableCount}from\"api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const columns=[{field:\"reimbursmentId\",headerName:\"Reimbursment ID\",width:250},{field:\"reimbursementDate\",headerName:\"Reimbursement Date\",flex:1},{field:\"totalAmount\",headerName:\"Total Amount\",flex:1}];const PAGE_SIZE=15;export default function MasterPage(){const[items,setItems]=useState([]);const[loading,setLoading]=useState(false);// Number of rows which exist on the service\nconst[rowCount,setRowCount]=useState(0);const loadData=async function(isFirstLoad){let skip=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;try{setItems([]);setLoading(true);if(isFirstLoad){const count=await getTableCount();setRowCount(count);}const _items=await getTableData({$top:PAGE_SIZE,$skip:skip});const itemsWithIds=_items.map((item,index)=>{item.id=index+skip;// Ensure unique IDs across pages\nreturn item;});setItems(itemsWithIds);}finally{setLoading(false);}};const handlePageChanged=_ref=>{let{page}=_ref;loadData(false,page*PAGE_SIZE);};const handleAdd=()=>{// Add your logic for adding an item here\nconsole.log(\"Add button clicked\");};const handleRefresh=()=>{// Logic to refresh the data\nloadData(true);// Reload the first page\n};useEffect(()=>{// when component mounted\nloadData(true);},[]);return/*#__PURE__*/_jsxs(Container,{disableGutters:true,children:[/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{flex:1},children:\"Reimbursement Records\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleAdd,children:\"Create\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"secondary\",onClick:handleRefresh,style:{marginLeft:'8px'},children:\"Refresh\"})]}),/*#__PURE__*/_jsx(Box,{height:\"80vh\",py:5,children:/*#__PURE__*/_jsx(DataGrid,{loading:loading,rows:items,columns:columns,pageSize:PAGE_SIZE,paginationMode:\"server\",rowCount:rowCount,onPageChange:handlePageChanged})})]});}","map":{"version":3,"names":["React","useEffect","useState","Container","Box","Toolbar","Button","Typography","DataGrid","getTableData","getTableCount","jsx","_jsx","jsxs","_jsxs","columns","field","headerName","width","flex","PAGE_SIZE","MasterPage","items","setItems","loading","setLoading","rowCount","setRowCount","loadData","isFirstLoad","skip","arguments","length","undefined","count","_items","$top","$skip","itemsWithIds","map","item","index","id","handlePageChanged","_ref","page","handleAdd","console","log","handleRefresh","disableGutters","children","variant","style","color","onClick","marginLeft","height","py","rows","pageSize","paginationMode","onPageChange"],"sources":["/home/user/projects/ReactReimbursement/reimModule/src/pages/MasterPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Container, Box, Toolbar, Button, Typography } from \"@material-ui/core\";\nimport { DataGrid } from \"@material-ui/data-grid\";\nimport { getTableData, getTableCount } from \"api\";\n\nconst columns = [\n  { field: \"reimbursmentId\", headerName: \"Reimbursment ID\", width: 250 },\n  { field: \"reimbursementDate\", headerName: \"Reimbursement Date\", flex: 1 },\n  { field: \"totalAmount\", headerName: \"Total Amount\", flex: 1 },\n];\n\nconst PAGE_SIZE = 15;\n\nexport default function MasterPage() {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Number of rows which exist on the service\n  const [rowCount, setRowCount] = useState(0);\n\n  const loadData = async (isFirstLoad, skip = 0) => {\n    try {\n      setItems([]);\n      setLoading(true);\n\n      if (isFirstLoad) {\n        const count = await getTableCount();\n        setRowCount(count);\n      }\n\n      const _items = await getTableData({\n        $top: PAGE_SIZE,\n        $skip: skip,\n      });\n      const itemsWithIds = _items.map((item, index) => {\n        item.id = index + skip; // Ensure unique IDs across pages\n        return item;\n      });\n      setItems(itemsWithIds);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePageChanged = ({ page }) => {\n    loadData(false, page * PAGE_SIZE);\n  };\n\n  const handleAdd = () => {\n    // Add your logic for adding an item here\n    console.log(\"Add button clicked\");\n  };\n\n  const handleRefresh = () => {\n    // Logic to refresh the data\n    loadData(true); // Reload the first page\n  };\n\n  useEffect(() => {\n    // when component mounted\n    loadData(true);\n  }, []);\n\n  return (\n    <Container disableGutters>\n      <Toolbar>\n        <Typography variant=\"h6\" style={{ flex: 1 }}>\n          Reimbursement Records\n        </Typography>\n        <Button variant=\"contained\" color=\"primary\" onClick={handleAdd}>\n          Create\n        </Button>\n        <Button variant=\"outlined\" color=\"secondary\" onClick={handleRefresh} style={{ marginLeft: '8px' }}>\n          Refresh\n        </Button>\n      </Toolbar>\n      <Box height=\"80vh\" py={5}>\n        <DataGrid\n          loading={loading}\n          rows={items}\n          columns={columns}\n          pageSize={PAGE_SIZE}\n          paginationMode=\"server\"\n          rowCount={rowCount}\n          onPageChange={handlePageChanged}\n        />\n      </Box>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}